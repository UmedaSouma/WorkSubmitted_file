//===========================================================================================================================================================
// 
// UIの描画などの処理 [UI.cpp]
// Author : souma umeda
// 
//===========================================================================================================================================================
#include "UI.h"
#include "texture.h"
#include "manager.h"

//========================================================================================================================
// コンストラクタ
//========================================================================================================================
CUI::CUI(int nPriority): CObject2D(nPriority)
	,m_nLife(-1)
	,m_bUse(true)
	,m_Isblink(false)
{
}

//========================================================================================================================
// デストラクタ
//========================================================================================================================
CUI::~CUI()
{
}

//========================================================================================================================
// 初期設定
//========================================================================================================================
HRESULT CUI::Init()
{
	CObject2D::Init();

	return S_OK;
}

//========================================================================================================================
// 終了処理
//========================================================================================================================
void CUI::Uninit()
{
	CObject2D::Uninit();
}

//========================================================================================================================
// 更新処理
//========================================================================================================================
void CUI::Update()
{
	if (m_nLife > 0)
	{
		m_nLife--;
	}

	if (m_nLife == 0)
	{
		Uninit();
		return;
	}

	CObject2D::Update();
}

//========================================================================================================================
// 描画処理
//========================================================================================================================
void CUI::Draw()
{
	if (m_bUse)
	{
		CObject2D::Draw();
	}
}

//========================================================================================================================
// 生成処理
//========================================================================================================================
CUI* CUI::Create(D3DXVECTOR3 pos, D3DXVECTOR3 size, int life, const char* filepass)
{
	CUI* pUI = new CUI;
	int nIdx = 0;

	CTexture* pTexData = CManager::GetTexture();
	nIdx = pTexData->Regist(filepass);
	pUI->BindTexture(pTexData->GetAddress(nIdx));

	pUI->SetPos(pos);
	pUI->SetSize(size);
	pUI->m_nLife = life;

	pUI->Init();

	return pUI;
}

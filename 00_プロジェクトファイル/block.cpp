//===========================================================================================================================================================
// 
// ブロックの管理
// Author : souma umeda
// 
//===========================================================================================================================================================
#include "block.h"
#include "player.h"
#include "block.h"
#include "manager.h"

LPDIRECT3DTEXTURE9 CBlock::m_pTexture = nullptr;

//========================================================================================================================
// コンストラクタ
//========================================================================================================================
CBlock::CBlock()
{
}

//========================================================================================================================
// デストラクタ
//========================================================================================================================
CBlock::~CBlock()
{
}

//========================================================================================================================
// 初期設定
//========================================================================================================================
HRESULT CBlock::Init()
{
	float fBlockSize = 50.0f;

	SetSize({ fBlockSize,fBlockSize,fBlockSize });
	SetTexSplit({ 1,1 });

	CObject2D::Init();

	return S_OK;
}

//========================================================================================================================
// 終了処理
//========================================================================================================================
void CBlock::Uninit()
{
	CObject2D::Uninit();
}

//========================================================================================================================
// 更新処理
//========================================================================================================================
void CBlock::Update()
{
	CObject2D::Update();
}

//========================================================================================================================
// 描画処理
//========================================================================================================================
void CBlock::Draw()
{
	CObject2D::Draw();
}

//========================================================================================================================
// 生成処理
//========================================================================================================================
CBlock* CBlock::Create(D3DXVECTOR3 pos)
{
	CBlock* pBlock = new CBlock;

	pBlock->SetPos(pos);
	pBlock->SetType(TYPE::BLOCK);
	pBlock->BindTexture(m_pTexture);

	pBlock->Init();

	return pBlock;
}

//========================================================================================================================
// テクスチャ読み込み
//========================================================================================================================
void CBlock::TextureLoad()
{
	if (m_pTexture == nullptr)
	{
		LPDIRECT3DDEVICE9 pDevice = CManager::GetRenderer()->GetDevice();

		D3DXCreateTextureFromFile(pDevice, "data\\TEXTURE\\minecraft_GrassBlock.png", &m_pTexture);
	}
}

//========================================================================================================================
// テクスチャ破棄
//========================================================================================================================
void CBlock::TextureUnload()
{
	if (m_pTexture != nullptr)
	{
		m_pTexture->Release();
		m_pTexture = nullptr;
	}
}


//CObstacle::CObstacle()
//{
//}
//
//CObstacle::~CObstacle()
//{
//}
//
//HRESULT CObstacle::Init()
//{
//	return S_OK;
//}
//
//void CObstacle::Uninit()
//{
//
//}
//
//void CObstacle::Update()
//{
//
//}
//
//void CObstacle::Draw()
//{
//
//}
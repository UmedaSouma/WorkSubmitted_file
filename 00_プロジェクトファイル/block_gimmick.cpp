//===========================================================================================================================================================
// 
// ギミックブロックの処理 [block_gimmick.cpp]
// Author : souma umeda
// 
//===========================================================================================================================================================
#include "block_gimmick.h"
#include "slime_boss.h"
#include "search.h"

//========================================================================================================================
// コンストラクタ
//========================================================================================================================
CBlockGimmick::CBlockGimmick():
	m_Gimmick(false)
{
}

//========================================================================================================================
// デストラクタ
//========================================================================================================================
CBlockGimmick::~CBlockGimmick()
{
}

//========================================================================================================================
// 初期設定
//========================================================================================================================
HRESULT CBlockGimmick::Init()	
{
	

	CBlock3D::Init();

	return S_OK;
}

//========================================================================================================================
// 終了処理
//========================================================================================================================
void CBlockGimmick::Uninit()
{
	CBlock3D::Uninit();
}

//========================================================================================================================
// 更新処理
//========================================================================================================================
void CBlockGimmick::Update()
{
	CSlimeBoss* pBoss = nullptr;
	pBoss = CSearch::SearchObject(pBoss, CObject::TYPE::ENEMY_BOSS);

	SetType(CObject::NONE);

	if (pBoss != nullptr)
	{
		m_Gimmick = pBoss->GetBossAppear();
	}

	if (m_Gimmick)
	{
		SetType(CObject::BLOCK);
	}

	CBlock3D::Update();
}

//========================================================================================================================
// 描画処理
//========================================================================================================================
void CBlockGimmick::Draw()
{
	if (m_Gimmick)
	{
		CBlock3D::Draw();
	}
}

//========================================================================================================================
// 生成処理
//========================================================================================================================
CBlockGimmick* CBlockGimmick::Create(D3DXVECTOR3 pos/*, D3DXVECTOR3 size*/)
{
	CBlockGimmick* pBlockGimmick = new CBlockGimmick;

	pBlockGimmick->SetPos(pos);
	//pBlockGimmick->SetSize(size);
	pBlockGimmick->Init();

	return pBlockGimmick;
}